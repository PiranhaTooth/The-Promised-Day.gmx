<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprBoss1</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>objPlayerKiller</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>image_alpha = 0;
image_speed = 1/5;

hasJumped = false;
jumpWindUp = 0;
attackComplete = false;
jumpCounter = 0;

attack1WindUp = 0;

attack2Timer1 = 0;
attack2Timer2 = 0;
attack2Dir1 = 180;
attack2Dir2 = 0;

INTRO = 1;
MOVING = 2;
ATTACK1 = 3;
ATTACK2 = 4;
ATTACK3 = 5;
ATTACK4 = 6;

state = INTRO;
statePrevious = INTRO;
attackPrevious = INTRO;

attackTimer = 0;
attackTimerMax = 0;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///attacks and states

//Attack finished
if instance_exists(objPlayer)
{
    if attackComplete = true
    {
        switch state
        {
            case INTRO:
            {
                attackTimer = 0;
                attackTimerMax = irandom_range(80,150);
                state = MOVING; 
                statePrevious = INTRO; 
            }
            break;
            case MOVING:
            {
                statePrevious = MOVING;
                if statePrevious = MOVING {jumpCounter ++;}
                if jumpCounter &lt; 3 {state = MOVING;} 
                else 
                {
                    switch attackPrevious
                    {
                        case INTRO:
                        {
                            state = choose(ATTACK1,ATTACK2);
                        }break;
                        case ATTACK1:
                        {
                            state = choose(ATTACK2);
                        }break;
                        case ATTACK2:
                        {
                            state = choose(ATTACK1);
                        }break;
                        case ATTACK3:
                        {
                            state = choose(ATTACK2,ATTACK1);
                        }break;
                    }
                    jumpCounter = 0;
                }
                
                attackTimer = 0;
                attackTimerMax = irandom_range(80,150);
                hasJumped = false;
                jumpWindUp = 0;
                attackComplete = false;
            }
            break;            
            case ATTACK1:
            {
                state = MOVING;
                attackTimer = 0;
                attack1WindUp = 0;
                attackComplete = false;
                statePrevious = ATTACK1;
                attackPrevious = ATTACK1;
            }
            break;
            case ATTACK2:
            {
                state = MOVING;
                attackTimer = 0;
                attackComplete = false;
                attack2Timer1 = 0;
                attack2Timer2 = 0;
                attack2Dir1 = 180;
                attack2Dir2 = 0
                statePrevious = ATTACK2;
                attackPrevious = ATTACK2;
            }
            break;
        }
    }

    //Attack started
    switch state
    {
        case INTRO:
        {
            if hasJumped = false {event_user(0);}
            if image_alpha &lt; 0.95 {image_alpha += 0.05;}  
            break;
        }
        case MOVING:
        {
            if attackTimer &lt; attackTimerMax and place_meeting(x,y + 8,objBlock) 
            {
                attackTimer += 1;
            }
            if attackTimer = round(attackTimerMax/2)
            {
                if objPlayer.x &lt; x
                {
                    image_xscale = 1;   
                }
                if objPlayer.x &gt; x
                {
                    image_xscale = -1;
                }
                jumpWindUp = 1
            }           
            if jumpWindUp = 1
            {
                if image_speed &lt; 0.6 {image_speed += 0.005;}
                if image_yscale &gt; 0.75 {image_yscale -= 0.005; if objPlayer.x &lt; x {image_xscale = (image_yscale/0.95);} else {image_xscale = -(image_yscale/0.95)}}
                if image_yscale &lt;= 0.75 {jumpWindUp = 2;}            
            }
            if jumpWindUp = 2 and attackTimer = attackTimerMax
            {               
                if objPlayer.x &lt; x {image_xscale = 1;} else {image_xscale = -1;}                
                image_yscale = 1;                
                if hasJumped = false {event_user(0);}
            }
        }
        break;
        case ATTACK1:
        {
            if attack1WindUp = 0
            {
                if image_yscale &gt; 0.65 
                {
                    image_yscale = lerp(image_yscale,0.65,0.05);                    
                    if objPlayer.x &lt; x 
                    {
                        image_xscale = lerp(image_xscale,(image_yscale/0.8),0.02);
                    } 
                    else 
                    {
                        image_xscale = lerp(image_xscale,-(image_yscale/0.8),0.02);
                    }
                }
                if image_yscale &lt; 0.66
                {
                    sprite_index = sprBoss1Jump;
                    hspeed = 1 * -image_xscale;
                    attack1WindUp =   1
                }
            }
            if attack1WindUp = 1
            {
                if objPlayer.x &lt; x {image_xscale = image_yscale;} else {image_xscale = -image_yscale;}
                image_yscale = lerp(image_yscale,1.2,0.2);
                if objPlayer.x &lt; x 
                {
                    image_xscale = lerp(image_xscale,0.6,0.2);
                } 
                else 
                {
                    image_xscale = lerp(image_xscale,-0.6,0.2);
                }
                if y &gt; 0 {vspeed = -14;} 
                else 
                { 
                    vspeed = 0;
                    image_yscale = 1; 
                    if !instance_exists(objBoss1Attack1Indicator) {instance_create(x,64,objBoss1Attack1Indicator);}
                    if instance_exists(objBoss1Attack1Indicator) {objBoss1.x = objBoss1Attack1Indicator.x;}
                    if attackTimer &lt; 256 {attackTimer += 1;}
                    if attackTimer = 225
                    {
                        attack1WindUp = 2;
                    }
                }
            } 
            if attack1WindUp = 2
            {
                with objBoss1Attack1Indicator {instance_destroy();}
                hspeed = 1 * -image_xscale;   
                vspeed = 18;
                attack1WindUp = 3;
            } 
            if attack1WindUp = 4
            {
                attackTimer ++;
                if attackTimer &lt; 15
                {
                    global.screenShake = true;
                    global.shake = 4;
                }
                if attackTimer = 15
                {
                    global.screenShake = false;
                    attackComplete = true;
                }                
            }       
        }
        break;
        case ATTACK2:
        {
            if !instance_exists(objBoss1Attack2Summon)
            {
                instance_create(100,100,objBoss1Attack2Summon);
                instance_create(700,100,objBoss1Attack2Summon);
            }
            attackTimer += 1;
            attack2Timer1 += 1;
            if (attack2Timer1 mod 10) = 0
            {
                instance_create(irandom_range(75,125),100,objBoss1Attack2);
                attack2Dir1 += 14.4;
            }
            
            if (attack2Timer1 mod 100) = 0
            {
                instance_create(400,100,objBoss1Attack2_3);
            }
            
            attack2Timer2 += 1;
            if (attack2Timer2 mod 10) = 0
            {
                instance_create(irandom_range(675,725),100,objBoss1Attack2_2);
                attack2Dir2 -= 14.4;
            }
            if attackTimer &gt;= 600
            {
                attackComplete = true;
                objBoss1Attack2Summon.destroy = true;
            }        
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///little details

if hspeed &gt; 0
{
    image_xscale = -1;
}
if hspeed &lt; 0
{
    image_xscale = 1;
}

if sprite_index != sprBoss1Jump and jumpWindUp != 1 
{
    image_speed = 1/5;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="objBlock">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (global.grav == 1)  //normal
{
    if !place_free(x,y + vspeed)
    {
        if(vspeed &gt; 0)
        {
            move_contact_solid(270,abs(vspeed));
            vspeed = 0;
            gravity = 0;
            sprite_index = sprBoss1;
        }
        if instance_exists(objPlayer)
        {
            hspeed = 0;
            if state = INTRO
            {
                hasJumped = false;
                /*
                if (instance_exists(objTextbox) and objTextbox.interact = true) or (instance_exists(objTextbox) and !place_meeting(objTextbox.x,objTextbox.y,objPlayer))
                {
                    state = ATTACK1;
                }*/
                if objPlayer.x &lt; x
                {
                    image_xscale = 1;   
                }
                if objPlayer.x &gt; x
                {
                    image_xscale = -1;
                }
                attackComplete = true;
            }
            if state = MOVING and hasJumped = true
            {
                attackComplete = true;
            }
            if state = ATTACK1
            {
                if attack1WindUp = 3
                {
                    attackTimer = 0;
                    scrMakeCircle(objBoss1.x,500,360,30,7,objBoss1Attack1);
                    attack1WindUp = 4;
                }
            }
            if state = ATTACK2
            {
                if attackTimer &gt; 50 and attackTimer &lt; 550
                {
                    event_user(0);
                }
            }
        }
    }
    if !place_free(x + hspeed,y)
    { 
        if(hspeed &lt;= 0){move_contact_solid(180,abs(hspeed));}
        if(hspeed &gt; 0){move_contact_solid(0,abs(hspeed));}
        hspeed = 0;
    }
    if !instance_exists(objPlayer)
    {
        hspeed = 0;
    }
}




</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if state = INTRO
{
    vspeed = -8; 
    hasJumped = true;
    hspeed = 4;
    gravity = 0.25;
    sprite_index = sprBoss1Jump;
    if image_index != 5
    {
        image_speed = (gravity / -vspeed) * 2.75;
    }
}
if state = MOVING
{
    vspeed = -random_range(6,11); 
    hasJumped = true;
    hspeed = (-vspeed / 2) * -image_xscale;
    gravity = 0.25;
    sprite_index = sprBoss1Jump;
    if image_index != 5
    {
        image_speed = (gravity / -vspeed) * 2.75;
    }
}
if state = ATTACK2
{
    vspeed = -random_range(6,11); 
    hasJumped = true;
    gravity = 0.25;
    sprite_index = sprBoss1Jump;
    if image_index != 5
    {
        image_speed = (gravity / -vspeed) * 2.75;
    }
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if sprite_index = sprBoss1Jump
{
    image_speed = 0;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_self();
scrDrawTextOutline(32,32,"attackTimer: " + string(attackTimer),c_white,c_black);
scrDrawTextOutline(32,64,"State Key: 1 = INTRO | 2 = MOVING | 3 = ATTACK1 | 4 = ATTACK2 | 5 = ATTACK3 | 6 = ATTACK4",c_white,c_black);
scrDrawTextOutline(32,80,"state: " + string(state),c_white,c_black);
scrDrawTextOutline(32,96,"hasjumped: " + string(hasJumped),c_white,c_black);
scrDrawTextOutline(32,112,"touching block: " + string(place_meeting(x,y,objBlock)),c_white,c_black);

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
